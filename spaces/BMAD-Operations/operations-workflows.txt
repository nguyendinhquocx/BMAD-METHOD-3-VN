# BMAD Operations Workflows - Quy TrÃ¬nh Váº­n HÃ nh Chi Tiáº¿t

---

## ðŸŽ¯ Overview - Tá»•ng Quan Quy TrÃ¬nh

### Operations Phase Mission
**Deploy, monitor, vÃ  maintain production systems vá»›i reliability, security, vÃ  optimal performance cho end users.**

### Key Success Outcomes
- âœ… **Production Deployment**: Application running stably in production environment
- âœ… **CI/CD Pipeline**: Automated testing, building, vÃ  deployment processes
- âœ… **Monitoring & Alerting**: Comprehensive observability vá»›i proactive issue detection
- âœ… **Security Compliance**: Security scanning, vulnerability management, compliance adherence
- âœ… **Performance Optimization**: System performing within defined SLA requirements
- âœ… **Incident Response**: Runbooks, escalation procedures, postmortem processes
- âœ… **Infrastructure as Code**: All infrastructure versioned, repeatable, vÃ  auditable
- âœ… **Disaster Recovery**: Backup strategies, recovery procedures tested vÃ  documented

---

## ðŸš€ Workflow 1: Initial Production Deployment (Greenfield)

### DÃ nh cho: First time deployment cá»§a new application to production

### Phase 1: Pre-Deployment Setup (Week 1)

#### Step 1.1: Infrastructure Planning (Day 1-2)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 1-2 days

**Activities**:
- Review architecture documents tá»« development phase
- Assess infrastructure requirements (compute, storage, network)
- Plan cloud resource allocation vÃ  sizing
- Design network topology vá»›i security considerations
- Plan monitoring vÃ  logging architecture

**Infrastructure Planning Template**:
```markdown
**Infrastructure Requirements**:
â”œâ”€â”€ **Compute**: CPU, Memory, Scaling requirements
â”œâ”€â”€ **Storage**: Database, File storage, Backup needs
â”œâ”€â”€ **Network**: Load balancing, CDN, Security groups
â”œâ”€â”€ **Security**: SSL certificates, Secrets management, Access control
â”œâ”€â”€ **Monitoring**: Metrics, Logs, Alerting endpoints
â””â”€â”€ **Backup**: Data backup, Recovery point objectives
```

**Deliverables**:
- Infrastructure architecture diagram
- Resource sizing recommendations
- Security configuration plan
- Monitoring strategy document

#### Step 1.2: Infrastructure Provisioning (Day 2-3)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 1-2 days

**Activities**:
- Create Infrastructure as Code templates (Terraform, CloudFormation, etc.)
- Provision production environment resources
- Configure security groups, IAM roles, network policies
- Setup SSL certificates vÃ  domain configuration
- Validate infrastructure connectivity vÃ  security

**Infrastructure as Code Standards**:
```markdown
**IaC Best Practices**:
â”œâ”€â”€ **Version Control**: All infrastructure code in Git
â”œâ”€â”€ **Modular Design**: Reusable modules cho common components
â”œâ”€â”€ **Environment Separation**: Dev, Staging, Production isolation
â”œâ”€â”€ **State Management**: Centralized state vá»›i locking
â”œâ”€â”€ **Security Scanning**: Automated security policy validation
â””â”€â”€ **Documentation**: Clear README vá»›i setup instructions
```

**Deliverables**:
- IaC templates (Terraform/CloudFormation files)
- Provisioned infrastructure environments
- Security configuration documentation
- Infrastructure access credentials (securely stored)

#### Step 1.3: CI/CD Pipeline Setup (Day 3-5)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 2-3 days

**Pipeline Stages Setup**:

##### Build Stage
```yaml
# Example GitHub Actions Pipeline
name: Production Deployment Pipeline

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
      - name: Setup environment
      - name: Install dependencies
      - name: Run tests
      - name: Security scanning
      - name: Build application
      - name: Build container image
```

##### Test Stage
- Unit tests execution
- Integration tests vá»›i staging database
- Security vulnerability scanning
- Code quality analysis
- Performance benchmarking

##### Deploy Stage
- Blue-green deployment strategy
- Health checks vÃ  smoke tests
- Rollback mechanism configuration
- Post-deployment validation

**Deliverables**:
- Complete CI/CD pipeline configuration
- Automated testing framework
- Deployment scripts vá»›i rollback capability
- Pipeline documentation vÃ  runbooks

### Phase 2: Monitoring & Security Setup (Week 2)

#### Step 2.1: Monitoring System Configuration (Day 6-8)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 2-3 days

**Monitoring Stack Components**:
```markdown
**Observability Stack**:
â”œâ”€â”€ **Metrics**: Application metrics, Infrastructure metrics, Business metrics
â”œâ”€â”€ **Logs**: Application logs, Infrastructure logs, Audit logs
â”œâ”€â”€ **Traces**: Distributed tracing cho microservices
â”œâ”€â”€ **Alerts**: Smart alerting vá»›i escalation policies
â”œâ”€â”€ **Dashboards**: Real-time visualization vÃ  monitoring
â””â”€â”€ **SLA Monitoring**: Service level tracking vÃ  reporting
```

**Monitoring Implementation**:
- Setup metrics collection (Prometheus, CloudWatch, DataDog)
- Configure centralized logging (ELK Stack, Splunk, CloudWatch Logs)
- Implement distributed tracing (Jaeger, Zipkin, X-Ray)
- Create operational dashboards (Grafana, Kibana)
- Configure alerting rules vá»›i escalation policies

**Alert Configuration Examples**:
```yaml
# Critical Alerts
- Application downtime (> 30 seconds)
- High error rate (> 5% in 5 minutes)
- Response time degradation (> 2 seconds 95th percentile)
- CPU usage sustained > 80% cho 10 minutes
- Memory usage > 90% cho 5 minutes
- Disk space < 10% available

# Warning Alerts  
- High response time (> 1 second 95th percentile)
- Elevated error rate (> 2% in 10 minutes)
- CPU usage > 70% cho 15 minutes
- Database connection pool > 80% utilized
```

**Deliverables**:
- Complete monitoring stack deployed
- Operational dashboards configured
- Alert rules configured vá»›i escalation
- Monitoring runbooks vÃ  troubleshooting guides

#### Step 2.2: Security Hardening (Day 8-10)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 2-3 days

**Security Implementation Checklist**:
```markdown
**Production Security Hardening**:
â”œâ”€â”€ **Network Security**: WAF, Security groups, VPC configuration
â”œâ”€â”€ **Access Control**: IAM policies, MFA, Least privilege principle
â”œâ”€â”€ **Data Protection**: Encryption at rest vÃ  in transit
â”œâ”€â”€ **Secrets Management**: Secure credential storage vÃ  rotation
â”œâ”€â”€ **Compliance**: SOC2, PCI DSS, GDPR requirements
â”œâ”€â”€ **Vulnerability Management**: Regular scanning vÃ  patching
â”œâ”€â”€ **Audit Logging**: Comprehensive audit trail
â””â”€â”€ **Incident Response**: Security incident procedures
```

**Security Automation**:
- Automated vulnerability scanning in CI/CD
- Secret rotation policies
- Security policy as code
- Compliance reporting automation
- Intrusion detection system configuration

**Deliverables**:
- Security hardening implementation
- Compliance documentation
- Security scanning automation
- Incident response procedures

### Phase 3: Deployment & Go-Live (Week 3)

#### Step 3.1: Staging Deployment & Testing (Day 11-12)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 1-2 days

**Staging Validation Process**:
```markdown
**Pre-Production Validation**:
â”œâ”€â”€ **Functional Testing**: All features working nhÆ° expected
â”œâ”€â”€ **Performance Testing**: Load testing vá»›i production-like data
â”œâ”€â”€ **Security Testing**: Penetration testing, vulnerability assessment
â”œâ”€â”€ **Integration Testing**: All external services functioning
â”œâ”€â”€ **Backup & Recovery**: Restore procedures tested
â”œâ”€â”€ **Monitoring Validation**: All alerts vÃ  dashboards working
â””â”€â”€ **Runbook Validation**: Operational procedures tested
```

**Load Testing Framework**:
- Traffic simulation vá»›i realistic user patterns
- Database performance under load
- API response time validation
- Resource utilization monitoring
- Breaking point identification

**Deliverables**:
- Staging environment fully validated
- Performance test results
- Security test clearance
- Go-live readiness checklist completed

#### Step 3.2: Production Deployment (Day 13)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 4-6 hours

**Deployment Day Procedure**:
```markdown
**Go-Live Timeline** (Recommended: Early morning, low traffic):
â”œâ”€â”€ **Pre-Deployment** (30 min)
â”‚   â”œâ”€â”€ Team assembly vÃ  communication channels
â”‚   â”œâ”€â”€ Rollback plan confirmation
â”‚   â”œâ”€â”€ Monitoring dashboard setup
â”‚   â””â”€â”€ Stakeholder notification
â”œâ”€â”€ **Deployment Execution** (60-90 min)
â”‚   â”œâ”€â”€ Blue-green deployment initiation
â”‚   â”œâ”€â”€ Health checks validation
â”‚   â”œâ”€â”€ Smoke tests execution
â”‚   â””â”€â”€ Traffic cutover (gradual)
â”œâ”€â”€ **Post-Deployment** (60 min)
â”‚   â”œâ”€â”€ System monitoring vá»›i extended observation
â”‚   â”œâ”€â”€ User acceptance validation
â”‚   â”œâ”€â”€ Performance metrics validation
â”‚   â””â”€â”€ Success confirmation communication
â””â”€â”€ **Cleanup** (30 min)
    â”œâ”€â”€ Old version decommissioning
    â”œâ”€â”€ Documentation updates
    â””â”€â”€ Team debrief scheduling
```

**Rollback Criteria**:
- Error rate > 5% trong 10 minutes
- Response time > 3 seconds 95th percentile
- Any critical functionality not working
- Security incident detected
- Database connectivity issues

**Deliverables**:
- Application successfully deployed to production
- All health checks passing
- Monitoring confirming stable operation
- Go-live communication sent to stakeholders

#### Step 3.3: Post-Deployment Monitoring (Day 13-15)
**Agent**: DevOps Engineer (Tom)  
**Duration**: 2-3 days intensive monitoring

**24/7 Monitoring Period**:
- Continuous system health monitoring
- User experience tracking
- Performance metrics analysis
- Error rate monitoring
- Business metrics validation

**Daily Status Reports**:
```markdown
**Daily Production Health Report**:
â”œâ”€â”€ **System Status**: Uptime, Response times, Error rates
â”œâ”€â”€ **User Experience**: Active users, Session duration, Conversion rates  
â”œâ”€â”€ **Infrastructure**: Resource utilization, Cost analysis
â”œâ”€â”€ **Security**: Security events, Vulnerability status
â”œâ”€â”€ **Business Impact**: Revenue impact, User satisfaction
â””â”€â”€ **Action Items**: Issues identified, Optimizations planned
```

**Deliverables**:
- 72-hour stable operation confirmation
- Performance baseline established
- Any critical issues resolved
- Operations team handoff completed

---

## ðŸ”„ Workflow 2: Feature Release Deployment

### DÃ nh cho: Deploying new features to existing production system

### Modified Deployment Approach

#### Phase 1: Feature Release Planning (2-3 days)
- **Release Scope Analysis**: What's changing, impact assessment
- **Deployment Strategy**: Blue-green, Canary, Feature flags
- **Rollback Plan**: How to quickly revert náº¿u cÃ³ issues
- **User Communication**: Release notes, user notifications

#### Phase 2: Canary Deployment (1-2 days)
- **Limited User Rollout**: 5-10% traffic initially
- **A/B Testing Setup**: Compare new vs old functionality
- **Monitoring Enhancement**: Additional metrics cho new features
- **Gradual Rollout**: 25%, 50%, 100% traffic progression

#### Phase 3: Full Release & Monitoring (2-3 days)
- **Complete Feature Activation**: All users access new features
- **User Adoption Monitoring**: Usage patterns, feedback collection
- **Performance Impact**: Resource utilization changes
- **Business Metrics**: Feature success measurement

---

## ðŸš¨ Workflow 3: Incident Response & Recovery

### DÃ nh cho: Production incidents requiring immediate response

### Incident Response Process

#### Phase 1: Incident Detection & Triage (0-15 minutes)
**Alert Categories**:
```markdown
**Incident Severity Levels**:
â”œâ”€â”€ **P0 (Critical)**: Complete service outage
â”œâ”€â”€ **P1 (High)**: Major feature not working, affects >50% users
â”œâ”€â”€ **P2 (Medium)**: Minor feature issues, affects <50% users  
â”œâ”€â”€ **P3 (Low)**: Performance degradation, doesn't affect functionality
â””â”€â”€ **P4 (Informational)**: Monitoring alerts, no user impact
```

**Immediate Response Actions**:
- Alert acknowledgment trong 5 minutes
- Incident commander assignment
- Communication channels setup
- Initial impact assessment
- Escalation if needed

#### Phase 2: Investigation & Mitigation (15-60 minutes)
**Investigation Framework**:
```markdown
**Troubleshooting Steps**:
â”œâ”€â”€ **Symptoms**: What is users experiencing?
â”œâ”€â”€ **Timeline**: When did issue start? What changed recently?
â”œâ”€â”€ **Logs Analysis**: Error messages, Stack traces, System events
â”œâ”€â”€ **Monitoring Data**: Metrics trends, Performance degradation
â”œâ”€â”€ **Infrastructure**: Server health, Network connectivity, Database status
â””â”€â”€ **Dependencies**: External services, Third-party APIs
```

**Mitigation Strategies**:
- Quick fixes (restart services, clear caches)
- Traffic routing (redirect to healthy instances)
- Feature flags (disable problematic features)
- Rollback (revert to previous working version)
- Scaling (add more resources náº¿u capacity issue)

#### Phase 3: Resolution & Recovery (1-4 hours)
**Resolution Process**:
- Root cause identification
- Permanent fix implementation
- Verification of fix effectiveness
- System stability monitoring
- User communication vá» resolution

#### Phase 4: Post-Incident Review (24-48 hours after)
**Post-Mortem Process**:
```markdown
**Post-Mortem Structure**:
â”œâ”€â”€ **Incident Summary**: What happened, When, Impact
â”œâ”€â”€ **Timeline**: Detailed sequence of events
â”œâ”€â”€ **Root Cause**: Why did incident occur?
â”œâ”€â”€ **Response Analysis**: What went well? What could improve?
â”œâ”€â”€ **Prevention**: How to prevent similar incidents?
â””â”€â”€ **Action Items**: Specific improvements vá»›i owners vÃ  deadlines
```

---

## âš¡ Workflow 4: Performance Optimization

### DÃ nh cho: Improving system performance vÃ  user experience

### Performance Optimization Process

#### Phase 1: Performance Baseline & Analysis (3-5 days)
**Performance Metrics Collection**:
```markdown
**Key Performance Indicators**:
â”œâ”€â”€ **Response Time**: API endpoints, Page load times
â”œâ”€â”€ **Throughput**: Requests per second, Transactions per minute
â”œâ”€â”€ **Resource Utilization**: CPU, Memory, Disk, Network
â”œâ”€â”€ **Database Performance**: Query times, Connection pools
â”œâ”€â”€ **User Experience**: Time to first byte, Time to interactive
â””â”€â”€ **Business Metrics**: Conversion rates, User engagement
```

**Performance Analysis Tools**:
- Application Performance Monitoring (APM)
- Database query analysis
- Load testing vá»›i realistic traffic
- User experience monitoring
- Infrastructure metrics analysis

#### Phase 2: Optimization Implementation (5-7 days)
**Optimization Strategies**:
- Code optimization (algorithm improvements, memory management)
- Database optimization (query tuning, indexing, caching)
- Infrastructure scaling (horizontal/vertical scaling)
- Caching implementation (Redis, CDN, application-level)
- Asset optimization (compression, minification, lazy loading)

#### Phase 3: Validation & Monitoring (2-3 days)
**Performance Validation**:
- Before/after comparison
- Load testing vá»›i optimizations
- User experience impact measurement
- Cost-benefit analysis
- Long-term performance monitoring setup

---

## ðŸ”§ Workflow 5: Infrastructure Updates & Maintenance

### DÃ nh cho: Regular infrastructure updates vÃ  security patches

### Maintenance Process

#### Phase 1: Maintenance Planning (1-2 days)
- **Update Assessment**: What needs updating, Security patches, System upgrades
- **Impact Analysis**: Downtime requirements, User impact, Rollback plan
- **Maintenance Window**: Scheduled maintenance time, User notification
- **Testing Strategy**: How to validate updates

#### Phase 2: Staging Updates & Testing (2-3 days)
- **Staging Environment Updates**: Apply updates to staging first
- **Comprehensive Testing**: Functionality, Performance, Security validation
- **Update Documentation**: Change logs, Known issues, Rollback procedures
- **Team Preparation**: Update runbooks, Communication plans

#### Phase 3: Production Updates (1 day)
- **Maintenance Execution**: Apply updates during scheduled window
- **Validation Testing**: Post-update system validation
- **Monitoring**: Extended monitoring period sau updates
- **Communication**: Update completion notification

---

## ðŸ“Š Operations Workflow Quality Metrics

### Operational Excellence Metrics

#### Deployment Metrics
- **Deployment Frequency**: How often deployments occur
- **Lead Time**: Time from code commit to production
- **Deployment Success Rate**: Percentage of successful deployments
- **Mean Time to Recovery**: Time to recover tá»« incidents

#### System Performance Metrics
- **Availability**: System uptime percentage (target: 99.9%+)
- **Response Time**: API response time 95th percentile
- **Error Rate**: Application error rate (target: <1%)
- **Throughput**: Requests per second handled

#### Security & Compliance Metrics
- **Vulnerability Resolution Time**: Time to fix security issues
- **Compliance Score**: Adherence to security policies
- **Incident Response Time**: Time to respond to security incidents
- **Audit Pass Rate**: Successful compliance audits

### Continuous Improvement Framework

#### Weekly Operations Review
- Review performance metrics trends
- Identify optimization opportunities
- Plan infrastructure improvements
- Update operational procedures

#### Monthly Infrastructure Review
- Analyze cost optimization opportunities
- Review scaling requirements
- Plan technology upgrades
- Update disaster recovery procedures

---

## ðŸŽ¯ Operations Workflow Decision Tree

```
â“ What type of operational activity?
â”œâ”€â”€ New Application Deployment
â”‚   â”œâ”€â”€ Complex Application â†’ Full 3-week deployment process
â”‚   â””â”€â”€ Simple Application â†’ Streamlined 2-week deployment
â”œâ”€â”€ Feature Release
â”‚   â”œâ”€â”€ High-risk Change â†’ Canary deployment vá»›i gradual rollout
â”‚   â””â”€â”€ Low-risk Change â†’ Blue-green deployment
â”œâ”€â”€ Production Incident
â”‚   â”œâ”€â”€ P0/P1 Incident â†’ Immediate war room, All hands response
â”‚   â””â”€â”€ P2/P3 Incident â†’ Standard incident response process
â”œâ”€â”€ Performance Issues
â”‚   â”œâ”€â”€ Critical Performance â†’ Emergency optimization workflow
â”‚   â””â”€â”€ Gradual Degradation â†’ Planned optimization workflow
â””â”€â”€ Maintenance & Updates
    â”œâ”€â”€ Security Patches â†’ Emergency patching workflow
    â””â”€â”€ Regular Updates â†’ Scheduled maintenance workflow
```

---

## ðŸš€ Operations Workflows Excellence!

CÃ¡c workflows nÃ y cung cáº¥p:

- âš¡ **Reliable Deployments**: Proven processes cho zero-downtime deployments
- ðŸ“Š **Comprehensive Monitoring**: Full observability vá»›i proactive alerting
- ðŸ”’ **Security First**: Security hardening vÃ  compliance built-in
- ðŸš¨ **Incident Readiness**: Structured incident response vá»›i fast recovery
- âš–ï¸ **Performance Optimization**: Continuous improvement cá»§a system performance
- ðŸ”§ **Infrastructure Management**: Systematic approach to infrastructure maintenance
- ðŸ“ˆ **Operational Excellence**: Metrics-driven continuous improvement

**Use these workflows to ensure rock-solid, scalable, secure production operations! ðŸŒŸ**